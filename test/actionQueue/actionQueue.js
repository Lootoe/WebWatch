!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).actionQueue={})}(this,(function(e){"use strict";e.ActionQueue=class{queue=[];config;reqStack=[];isReporting=!1;constructor(e){this.config=Object.assign(this.defaultConfig,e)}get defaultConfig(){return{queueSize:10,beforePush:null}}pushAction(e){if("function"!=typeof this.config.beforePush)this.__pushAction(e);else{let t=this.config.beforePush(e);t?this.__pushAction(t):this.__pushAction(e)}}__pushAction(e){this.queue.length>=this.config.queueSize&&this.queue.shift(),this.queue.push(e)}getActions(){return[...this.queue]}idleReport(e){this.isReporting||(this.isReporting=!0,this.reqStack.push(e),requestIdleCallback((()=>{this.isReporting=!1;this.reqStack.shift()()})))}}}));
