<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试</title>
</head>

<body>
    <script src="./actionQueue.js"></script>
    <script>
        const AQ = new actionQueue.ActionQueue({
            maxSize: 12,
            beforeHook: (action) => {
                console.log('action', action)
            }
        })
        let num = 0
        setInterval(() => {
            num++
            AQ.pushAction({ msg: num })
        }, 1000)

        setInterval(() => {
            AQ.pushAction({ msg: 'error happend' })
            const actions = AQ.getActions()
            const fn = () => {
                console.log(actions)
            }
            AQ.idleReport(fn)
        }, 3000);
    </script>
</body>

</html>